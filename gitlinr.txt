#include "monty.h"
/**
 * _getline - Reads a line from the input file descriptor, replaces newlines
 *            with semicolons, and updates the data structure.
 *
 * @data: Pointer to the data_of_program struct.
 * Return: The length of the input line read, or EOF if an error occurs.
 */
int _getline(char **linptr, FILE *file)
{
	int c;
	int i = 0, j;
	int bufferSize = BUFFER_SIZE;
	char *newBuffer;

	*linptr = (char *)malloc(bufferSize * sizeof(char));
	if (*linptr == NULL)
	{
		print_error(4);
	}

	while ((c = fgetc(file)) != EOF)
	{
		(*linptr)[i++] = (char)c;

		if (i == bufferSize - 1)
		{
			bufferSize *= 2;

			newBuffer = (char *)malloc(bufferSize * sizeof(char));
			if (newBuffer == NULL)
			{
				print_error(4);
			}

			for (j = 0; j < i; j++)
			{
				newBuffer[j] = (*linptr)[j];
			}

			free(*linptr);
			*linptr = newBuffer;
		}
	}
	if ((*linptr)[i] == '\n')
	{
		(*linptr)[i] = '\0';
	}
	return i;
}